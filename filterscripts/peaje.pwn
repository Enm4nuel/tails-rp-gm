#define FILTERSCRIPT
#include <a_samp>
#if defined FILTERSCRIPT

new gateid = 968;
new baseid = 966;

new Float:GatePos[][] =
{
	{-1282.490600, 961.334655, 45.400672, 0.000000, 89.699882, -42.400009, 0.0000, 0.0000, 90.0000}, 
	{-1277.236694, 942.897094, 45.400672, -0.000005, 89.699890, 135.999862, 0.0000, 0.0000, 90.0000}, 
	{51.771469, -1540.433471, 4.923344, 0.000000, -89.999961, -100.099967, 0.0000, 0.0000, 90.0000}, 
	{54.752601, -1523.336914, 4.923344, -0.000007, -89.999961, 80.900024, 0.0000, 0.0000, 90.0000}, 
	{1755.552612, 519.806030, 27.482704, 0.000000, -90.099975, -21.100002, 0.0000, 0.0000, 90.0000}, 
	{1747.101440, 522.996154, 27.482704, -0.000002, -90.099967, -21.100000, 0.0000, 0.0000, 90.0000}, 
	{1735.812988, 538.189697, 26.832685, 0.000000, -90.099975, 158.899856, 0.0000, 0.0000, 90.0000}, 
	{1727.282714, 541.400512, 26.832685, 0.000002, -90.099983, 158.899826, 0.0000, 0.0000, 90.0000}
};

new Float:BasePos[][] = 
{
    {-1282.490234, 961.332763, 44.681667, 0.000000, -0.099999, 137.600051, 0.0000, 0.0000, 90.0000},
    {-1277.237060, 942.899047, 44.681667, 0.000005, -0.100005, -44.000053, 0.0000, 0.0000, 90.0000},
    {51.770069, -1540.432373, 4.175255, 0.000000, 0.000000, -100.099983, 0.0000, 0.0000, 90.0000},
    {54.754020, -1523.338012, 4.175255, -0.000007, -0.000001, 80.900009, 0.0000, 0.0000, 90.0000},
    {1755.585571, 519.799499, 26.804742, 0.000000, 0.000000, -21.100002, 0.0000, 0.0000, 90.0000},
    {1747.134399, 522.989624, 26.804742, -0.000002, 0.000007, -21.100000, 0.0000, 0.0000, 90.0000},
    {1735.780029, 538.196228, 26.154724, 0.000000, 0.000000, 158.899856, 0.0000, 0.0000, 90.0000},
    {1727.249755, 541.407043, 26.154724, 0.000002, -0.000007, 158.899826, 0.0000, 0.0000, 90.0000}
};

new TollPaid[MAX_PLAYERS][sizeof(GatePos)];
new Gate[sizeof(GatePos)];
new Base[sizeof(BasePos)];

forward TollGate_Open();

public OnFilterScriptInit()
{

	for(new a; a<sizeof(GatePos); a++)
    {
        Gate[a] = CreateObject(gateid, GatePos[a][0],GatePos[a][1],GatePos[a][2],GatePos[a][3],GatePos[a][4],GatePos[a][5], 150.0);
	}

    for(new a; a<sizeof(BasePos); a++)
    {
        Base[a] = CreateObject(baseid, BasePos[a][0],BasePos[a][1],BasePos[a][2],BasePos[a][3],BasePos[a][4],BasePos[a][5], 150.0);
	}
	
	SetTimer("TollGate_Open", 1500, 1);

	return 1;
}

#endif

public TollGate_Open(){

    for(new i=GetMaxPlayers(); i > -1; i--)
    {
        for(new a; a<sizeof(GatePos); a++)
    	{
    	    //If Player is in range of toll gate AND if open is false
	        if(IsPlayerInRangeOfPoint(i, 6, GatePos[a][0],GatePos[a][1],GatePos[a][2]) && GetPlayerVehicleSeat(i) == 0)
         	{
                if(TollPaid[i][a] == 0)
				{
	                TollPaid[i][a] = 1;
	                MoveObject(Gate[a], GatePos[a][0], GatePos[a][1], GatePos[a][2]+0.1, 0.15, GatePos[a][3], 0.0, GatePos[a][5]);
					GivePlayerMoney(i,-100);
					GameTextForPlayer(i,"$ -100",3000,4);
				}
	        }
			else
	        {
	            //If already paid then close the gate
		        if(TollPaid[i][a] == 1){
	        		MoveObject(Gate[a], GatePos[a][0], GatePos[a][1], GatePos[a][2]-0.01, 0.15, GatePos[a][3], GatePos[a][4], GatePos[a][5]);
					TollPaid[i][a] = 0;
				}
	        }
		}
    }
    
    return 1;
}

/*
// **** puertas de peajes **** //
	tmpobjid = CreateDynamicObject(966, -1282.490234, 961.332763, 44.681667, 0.000000, -0.099999, 137.600051, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, -1282.490600, 961.334655, 45.400672, 0.000000, 89.699882, -42.400009, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, -1277.237060, 942.899047, 44.681667, 0.000005, -0.100005, -44.000053, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, -1277.236694, 942.897094, 45.400672, -0.000005, 89.699890, 135.999862, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 51.770069, -1540.432373, 4.175255, 0.000000, 0.000000, -100.099983, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 51.771469, -1540.433471, 4.923344, 0.000000, -89.999961, -100.099967, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 54.754020, -1523.338012, 4.175255, -0.000007, -0.000001, 80.900009, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 54.752601, -1523.336914, 4.923344, -0.000007, -89.999961, 80.900024, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 1755.585571, 519.799499, 26.804742, 0.000000, 0.000000, -21.100002, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 1755.552612, 519.806030, 27.482704, 0.000000, -90.099975, -21.100002, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 1747.134399, 522.989624, 26.804742, -0.000002, 0.000007, -21.100000, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 1747.101440, 522.996154, 27.482704, -0.000002, -90.099967, -21.100000, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 1735.780029, 538.196228, 26.154724, 0.000000, 0.000000, 158.899856, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 1735.812988, 538.189697, 26.832685, 0.000000, -90.099975, 158.899856, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(966, 1727.249755, 541.407043, 26.154724, 0.000002, -0.000007, 158.899826, -1, -1, -1, 300.00, 300.00); 
	tmpobjid = CreateDynamicObject(968, 1727.282714, 541.400512, 26.832685, 0.000002, -90.099983, 158.899826, -1, -1, -1, 300.00, 300.00); 

	SetTimer("TollGate_Open", 1500, 1);
    */